<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Your Pinboard</title>

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!--Tinymce Text-Editor (Must be in Head Tag) -->
    {% load staticfiles %}
    <script src="{% static '/js/tinymce/tinymce.min.js' %}"></script>
    <script type="text/javascript" src="{% static '/js/tinymce/custom.js' %}" ></script>

    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous">
    </script>

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>-->

    {% load static %} 
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

    <!--<link rel="stylesheet" href="{% static 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css' %}">-->

    <!--<link rel="stylesheet" href="{% static 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css' %}">-->

  </head>
  <body>
    <div class="background">

      {% if request.session.username %}
      <ul id="slide-out" class="sidenav">
        <li><div class="user-view">
          <div class="background">
            <img src="https://i.imgur.com/G91dSvD.jpg">
          </div>
          <a href="#user"><img class="circle" src="https://i.imgur.com/8P2xzAg.jpg"></a>
          <div class="profile-details-panel" style="background: rgba(255,255,255,0.6);border-radius: 8px;">
              <a href="#name"><span class="black-text name">{{ request.session.username }}</span></a>
              <!--<a href="#email"><span class="black-text email">example@gmail.com</span></a>-->
            <a href="#email"><span class="black-text email">{{ request.session.useremail }}</span></a>
          </div>

        </div></li>
        <li><a class="waves-effect" href="/blogs/create"><i class="material-icons">add_box</i>Create Post</a></li>
        <li><a class="waves-effect" href="#!"><i class="material-icons">account_box</i>Manage Account</a></li>
        <li><div class="divider"></div></li>
        <li><a class="waves-effect" href="/blogs/logout/"><i class="material-icons">exit_to_app</i>Logout</a></li>
      </ul>
      {% endif %}
      
      <nav class="nav-container pinboard">
        <div class="nav-wrapper transparent">
          {% if request.session.username %}
          <a href="/" class="brand-logo pinboard"><i class="large material-icons">event_note</i>Pinboard</a>
          {% endif %}
          <ul class="right hide-on-med-and-down">
            <!-- <li><a href="#"><i class="material-icons">search</i></a></li> -->
            <li><a href="#" data-target="slide-out" class="sidenav-trigger" style="display:block !important"><i class="material-icons">menu</i></a></li>
          </ul>
        </div>
      </nav>

      <div class="container pinboard">
        <div class="row">
            <div class="col s12">
                {% block content %}
                {% endblock %}
            </div>
        </div>
      </div>


    </div>

    <script>

      // initialize the sidebar
      $(document).ready(() => {
        const options = { edge: 'right' };
        $('.sidenav').sidenav(options);
      });

      // handle pressing of upvote/downvote button
      $('.btn-flat.vote').click(event => {
        const postID = $(event.target).attr('post_id');
        let scoreValue = $(`#score-${postID}`).text(); 
        if (event.target.id.indexOf('upvote') > -1) {
          $(`#score-${postID}`).text(++scoreValue);
        } else if (event.target.id.indexOf('downvote') > -1) {
          $(`#score-${postID}`).text(--scoreValue);
        }
      });

      (function(d, t) {
        var g = d.createElement(t),
                s = d.getElementsByTagName(t)[0];
        g.src = '//hnbutton.appspot.com/static/hn.min.js';
        s.parentNode.insertBefore(g, s);
      }(document, 'script'));



    </script>

  </body>
</html>